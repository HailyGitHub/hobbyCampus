<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hobbycam"> 
	<insert id="insertCoupon" parameterType="com.hobbycam.coupon.Model.CouponsDTO"> 
	insert into
		coupon_list
	values(
		seq_coupon_idx.nextval,
		#{coupon_title}, <!-- DTO 안의 getter 호출 ==DTO.getWriter -->
		#{coupon_rate},
		#{coupon_img},
		sysdate,
		#{coupon_end},
		coupon_state
	)
	</insert>
	
	<select id="selectCouponList" parameterType="Map" resultType="com.hobbycam.coupon.Model.CouponsDTO">
		select * from 
		(select rownum as rnum,a.* from 
		(select * from coupon_list order by coupon_idx desc)a)b 
		where rnum<![CDATA[>=]]>#{start} 
		and rnum<![CDATA[<=]]>#{end}
	</select>
	<select id="selectCouponInfo" parameterType="Integer" resultType="com.hobbycam.coupon.Model.CouponsDTO">
	select 
		* 
	from 
		coupon_list 
	where 
		coupon_idx=#{coupon_idx} 
	</select>
	<select id="totalCnt" resultType="Integer">
		select 
			count(*) 
		from 
			jsp_bbs 
	</select>
</mapper>
